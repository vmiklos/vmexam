= pdfium notes

== setup

See <https://pdfium.googlesource.com/pdfium/>:

----
git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git
export PATH=`pwd`/depot_tools:"$PATH"
gclient config --unmanaged https://pdfium.googlesource.com/pdfium.git
gclient sync
sudo zypper in gyp
build/linux/sysroot_scripts/install-sysroot.py --arch=amd64
gn gen workdir
gn args workdir
----

argument list:

----
is_debug = true
pdf_enable_xfa = false
pdf_enable_v8 = false
pdf_is_standalone = true    # important - to get pdfium_test
is_component_build = false
pdf_is_complete_lib = true
#system_libjpeg_config = true
----

finally:

----
sed -i 's|-fuse-ld=gold ||' $(find workdir/ -name "*.ninja")
sed -i 's|-Wl,--icf=all ||' $(find workdir/ -name "*.ninja")
sed -i 's|-Wl,--gdb-index ||' $(find workdir/ -name "*.ninja")
ninja -C workdir
----

== path API

- first goal: expose # of points in a path -> patch is at https://pdfium-review.googlesource.com/c/pdfium/+/13592
- ed4705b4db1405a5abef99ad1b2725eee65fedf8 added similar public api with a test

how to run the tests?

----
workdir/pdfium_embeddertests
----

But has to disable bunch of already failing tests.

// vim: ft=asciidoc
