= openSUSE notes

== osc

- Updating a package in OBS, examples:

----
osc build --alternative-project openSUSE:Leap:42.1 --release 9999 standard
osc build openSUSE_13.2
osc build --alternative-project=openSUSE:13.2 ports (ARM)
----

then:

----
osc vc
osc commit
----

- Updating its git mirror:

cd $HOME/git/opensuse-packages
git checkout gtimelog
$HOME/git/bsgit/bsgit.py fetch home:vmiklos/gtimelog
git merge remotes/api.opensuse.org/home/vmiklos/gtimelog
git push origin

== zypper

- zypper factory bootstrap:

zypper --root /var/chroot/opensuse-factory addrepo http://download.opensuse.org/factory/repo/oss/ repo-oss
zypper --root /var/chroot/opensuse-factory install patterns-openSUSE-base

- zyp-file: https://github.com/benthaman/zyp-file

- downgrade after broken update: zypper in --oldpackage --from repo-oss pkg1 [ pkg2 ... ]

- upgrade to some package from a custom repo:

zypper -p http://download.opensuse.org/repositories/KDE:/Extra/openSUSE_13.1/ in gtk2-engine-oxygen-1.4.4-11.1.x86_64 gtk2-theme-oxygen-1.4.4-11.1.x86_64

== cubox-i

- attach screen:

screen /dev/ttyUSB0 115200

- re-generate boot.scr (in /boot):

mkimage -C none -A arm -T script -d boot.script boot.scr

- raid1 root:

edit /etc/dracut.conf.d/01-dist.conf, comment out hostonly=

- special dracut problem because the kernel version ends with "-i", just run:

dracut --force

without any parameters, and it'll work.

== Upgrade notes

=== openSUSE 13.1 -> 13.2

- virt-manager is broken by default

https://bugzilla.suse.com/show_bug.cgi?id=901869

TL;DR: zypper in typelib-1_0-Gtk-3_0 typelib-1_0-SpiceClientGtk-3_0 typelib-1_0-GtkVnc-2_0

- STL container pretty-printers do not work by default in gdb anymore (debuginfo uninstalled on upgrade?):

Can be fixed with: 'zypper in libstdc++6-debuginfo'

- virt-resize is broken by default

https://bugzilla.novell.com/show_bug.cgi?id=908632

TL;DR: zypper -p http://download.opensuse.org/repositories/Virtualization/openSUSE_13.2/ in guestfs-data-1.26.9-163.1.x86_64

=== openSUSE 13.2 -> openSUSE Leap 42.1

- adjust repos:

  * 13.2 -> Leap-13.2 in names
  * 13.2 -> leap/42.1 in URLs

- cpm fails to build

https://bugzilla.novell.com/show_bug.cgi?id=918553

Fixed in <24 hours. :-)

- cxoffice is broken

https://bugzilla.novell.com/show_bug.cgi?id=845916

Fix: cd /opt/cxoffice/lib; mkdir t; mv libxcb* t

- KDE4 -> KDE5, retain a number of old settings:

  * update /etc/sysconfig/displaymanager: kdm -> sddm
  * cursor theme: Get New Theme, DMZ
  * desktop effects: change virtual desktop switching animation from slide to fade
  * panel height: 35px, clock date
  * digital clock settings -> tick 'show week numbers in Calendar'
  * k menu: alternatives -> launcher is the kde4 style thing
  * k menu favorites: systemsettings -> systemsettings5, etc
  * kbd layout chooser in systemsettings5
  * kbd layout fix: alt-1 and alt-7 works in bash once global keyboard shortcuts 'walk through windows of current application' (alt-~ and alt-`) are disabled
  * disable screen lock on screensaver
  * focus follows mouse: window management -> window behavior -> focus
  * kmix: individual process control seems to be no longer implemented, using 'pavucontrol' is a workaround

- sidebar is broken in mutt:

https://build.opensuse.org/request/show/350312

// vim: ft=asciidoc paste
